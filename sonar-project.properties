# SonarCloud configuration for floe
# https://sonarcloud.io/project/configuration?id=Obsidian-Owl_floe

sonar.projectKey=Obsidian-Owl_floe
sonar.organization=obsidian-owl

# Project metadata
sonar.projectName=floe
sonar.projectVersion=0.1.0

# Python-specific settings
sonar.python.version=3.10,3.11,3.12
sonar.python.coverage.reportPaths=coverage.xml,coverage-3.10.xml,coverage-3.11.xml,coverage-3.12.xml

# Exclude test files, generated/third-party code, and devtools from source analysis
# devtools/ contains internal tooling (agent-memory) with separate test infrastructure
# that has dependency conflicts with main workspace (cognee requires hishel 1.x)
sonar.exclusions=**/tests/**/*.py,**/*_test.py,**/test_*.py,testing/**/*.py,testing/**/*.sh,.floe/**/*.*,**/node_modules/**/*.*,**/.venv/**/*.*,devtools/**/*.*

# Include test directories for test analysis
sonar.test.inclusions=**/tests/**/*.py,**/*_test.py,**/test_*.py,testing/**/*.py

# Duplication exclusions - specs/ contains contract documentation
# that intentionally mirrors implementation (single source of truth is packages/)
sonar.cpd.exclusions=specs/**/*,benchmarks/**/*

# Coverage exclusions - specs/ has no tests (docs), benchmarks/ are perf tests
# devtools/ has separate test infrastructure not integrated with main coverage
# CLI entry points (main.py) are integration-tested, not unit-tested
sonar.coverage.exclusions=specs/**/*,benchmarks/**/*,**/conftest.py,devtools/**/*,**/main.py

# Issue exclusions for test-related files using multicriteria
# Ignore all rules (*) on test file patterns
# Security hotspots in test code are expected (test credentials, mock data, etc.)
sonar.issue.ignore.multicriteria=testFiles1,testFiles2,testFiles3,testFiles4
sonar.issue.ignore.multicriteria.testFiles1.ruleKey=*
sonar.issue.ignore.multicriteria.testFiles1.resourceKey=**/test_*.py
sonar.issue.ignore.multicriteria.testFiles2.ruleKey=*
sonar.issue.ignore.multicriteria.testFiles2.resourceKey=**/*_test.py
sonar.issue.ignore.multicriteria.testFiles3.ruleKey=*
sonar.issue.ignore.multicriteria.testFiles3.resourceKey=**/tests/**/*.py
sonar.issue.ignore.multicriteria.testFiles4.ruleKey=*
sonar.issue.ignore.multicriteria.testFiles4.resourceKey=testing/**/*.*

# Encoding
sonar.sourceEncoding=UTF-8
